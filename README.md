# MiSidetext 插件

一款为Minecraft服务器设计的创意聊天插件，在玩家聊天时显示炫酷的侧边文本效果，提升服务器聊天体验。

## 功能特点

### 1. 创意文本显示效果
- **侧边字符实体显示**：将玩家聊天消息以单个字符实体的形式显示在玩家侧面
- **打字机效果**：字符逐字显示，营造打字过程的视觉体验
- **字符跳动动画**：每个字符实体都有轻微的跳动效果，增强视觉吸引力
- **换行坠落效果**：当消息换行时，前一行字符会有自然的坠落物理效果
- **紫底白边样式**：采用醒目的紫底白边设计，确保文本清晰可见

### 2. 多频道聊天系统
- **普通聊天**：默认聊天频道
- **大喊频道**：使用`@`前缀，发送给更远距离的玩家
- **小声频道**：使用`~`前缀，仅发送给近距离的玩家
- **全局频道**：使用`!`前缀，发送给服务器所有玩家
- **频道颜色区分**：不同频道使用不同颜色，便于识别

### 3. 个性化设置
- **打字速度调整**：玩家可以自定义字符显示的速度
- **跳动高度调整**：自定义字符跳动的幅度
- **坠落持续时间调整**：控制字符坠落动画的持续时间
- **效果开关控制**：玩家可以随时开关侧边文本效果

### 4. 声音反馈
- **按钮点击音效**：发送消息时播放点击声音，增强交互感
- **可配置音效参数**：支持自定义声音类型、音量和音调

### 5. 性能监控
- **TPS监控**：实时监控服务器TPS，确保插件不影响服务器性能
- **性能测试功能**：管理员可以进行负载测试，评估插件在高负载下的表现
- **自动清理机制**：及时清理过期的文本实体，防止内存泄漏

### 6. 完善的管理功能
- **插件重载命令**：无需重启服务器即可应用配置更改
- **权限控制系统**：细粒度的权限管理，控制玩家使用权限
- **聊天日志记录**：记录玩家聊天内容，便于管理和审查
- **禁言系统**：支持临时禁言功能，维护服务器聊天秩序

## 命令介绍

### 主命令
- `/misidetext` 或 `/st`：显示帮助信息

### 子命令
- `/st toggle`：开关侧边文本效果
- `/st reload`：重载插件配置（需要权限）
- `/st test`：测试侧边文本效果
- `/st settings typing <值>`：设置打字速度（50-500ms）
- `/st settings bounce <值>`：设置跳动高度（0-0.5）
- `/st settings fall <值>`：设置坠落持续时间（1-10秒）
- `/st settings status`：查看当前设置状态
- `/st channel <频道>`：设置默认聊天频道（normal/shout/whisper/global）
- `/st performance start <持续时间> <频率> <文本长度>`：开始性能测试
- `/st performance status`：查看测试状态和TPS
- `/st performance stop`：停止性能测试

### 权限节点
- `misidetext.use`：允许使用侧边文本功能（默认开启）
- `misidetext.reload`：允许重载插件配置（默认OP）
- `misidetext.settings`：允许修改动画设置（默认OP）

## 配置说明

### 侧边文本设置
```yaml
side-text:
  enabled: true                 # 是否启用侧边文本效果
  duration: 8.0                 # 文本显示持续时间（秒）
  typing-speed: 100             # 打字机效果速度（毫秒/字符）
  bounce-height: 0.1            # 跳动动画幅度
  bounce-period: 0.5            # 跳动周期（秒）
  fall-duration: 3.0            # 掉落持续时间（秒）
  max-length: 50                # 最大显示字符数
  line-fall-effect: true        # 是否启用换行时前一行掉落效果
  fade-in-effect: true          # 字符出现时的淡入效果
  line-delay: 10                # 每行之间的延迟（字符时间单位）
  x-offset: 1.5                 # 文本显示的X偏移（从玩家侧面的距离）
  y-offset: 0.0                 # 文本显示的Y偏移（从玩家眼睛高度的偏移）
```

### 声音效果设置
```yaml
sound-effects:
  enabled: true                 # 是否启用按钮点击声音
  click-sound: "block.stone_button.click_on"  # 按钮点击声音类型
  volume: 1.0                   # 声音音量
  pitch: 1.0                    # 声音音调
```

### 聊天频道设置
```yaml
chat-channels:
  global-prefix: "!"            # 全局频道前缀
  local-radius: 100.0           # 本地频道半径（方块）
  shout-prefix: "@"             # 大喊频道前缀
  whisper-prefix: "~"           # 小声频道前缀
  normal-color: "&f"            # 普通频道颜色代码
  global-color: "&c"            # 全局频道颜色代码
  shout-color: "&e"             # 大喊频道颜色代码
  whisper-color: "&7"           # 小声频道颜色代码
```

### 粒子效果设置
```yaml
particle-effects:
  enabled: true                 # 是否启用粒子效果
  # 粒子类型配置
```

## 安装方法

1. 确保您的服务器使用兼容的Minecraft版本（推荐1.21+）
2. 下载MiSidetext插件的JAR文件
3. 将JAR文件放入服务器的`plugins`文件夹
4. 重启服务器或使用插件管理器加载插件
5. 插件将自动生成默认配置文件

## 最佳实践

1. **性能优化**：对于大型服务器，建议适当增加打字速度，减少字符显示数量
2. **玩家体验**：可以根据服务器风格调整颜色和动画参数
3. **权限管理**：根据需要为玩家分配设置权限
4. **定期维护**：监控插件性能，及时调整配置

## 常见问题

**Q: 插件会影响服务器性能吗？**
A: 插件内置了TPS监控和自动清理机制，正常情况下对性能影响很小。建议管理员定期使用性能测试功能评估。

**Q: 如何修改默认聊天频道？**
A: 使用`/st channel [频道]`命令可以切换默认频道，频道包括normal、shout、whisper和global。

**Q: 文本实体不会自动消失怎么办？**
A: 请检查配置中的duration设置，并确保服务器TPS正常。如问题持续，可以使用/reload命令重载插件。

## 开发者信息

- **作者**: Anliou
- **插件版本**: 1.0-SNAPSHOT
- **支持的Minecraft版本**: 1.21+
- **API版本**: 1.21

## 反馈与支持

如有任何问题、建议或BUG反馈，请通过以下方式联系开发者：
- 提交Issue到插件仓库
- 发送邮件至开发者邮箱

## 更新日志

### v1.0.0 - 初始版本
- 实现侧边文本显示功能
- 添加多频道聊天系统
- 实现个性化设置
- 添加声音反馈
- 集成性能监控
- 完善管理功能

---

感谢使用MiSidetext插件！希望它能为您的Minecraft服务器带来更有趣的聊天体验！